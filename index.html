<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funded Trading Position Size Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
        color: #ffffff;
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 900px;
        margin: 0 auto;
        background: rgba(26, 26, 46, 0.8);
        border: 1px solid rgba(0, 255, 157, 0.3);
        border-radius: 15px;
        padding: 30px;
        backdrop-filter: blur(10px);
    }

    h1 {
        text-align: center;
        color: #00ff9d;
        margin-bottom: 30px;
        font-size: 2rem;
    }

    .calculator-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .input-group {
        display: flex;
        flex-direction: column;
    }

    .input-group label {
        color: #cccccc;
        font-weight: 500;
        margin-bottom: 8px;
    }

    .input-group input,
    .input-group select {
        background: rgba(15, 15, 35, 0.9);
        border: 1px solid rgba(0, 255, 157, 0.3);
        border-radius: 8px;
        padding: 12px;
        color: #ffffff;
        font-size: 16px;
        transition: border-color 0.3s ease;
    }

    .input-group input:focus,
    .input-group select:focus {
        outline: none;
        border-color: #00ff9d;
        box-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
    }

    .btn {
        background: linear-gradient(135deg, #00ff9d 0%, #00d4aa 100%);
        color: #0f0f23;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 16px;
        cursor: pointer;
        transition: transform 0.3s ease;
        width: 100%;
    }

    .btn:hover {
        transform: translateY(-2px);
    }

    /* Results Styles */
    .calculation-result {
        background: rgba(15, 15, 35, 0.8);
        border: 1px solid #00ff9d;
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
        color: #ffffff;
    }

    .result-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .result-item {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        background: rgba(0, 255, 157, 0.1);
        border-radius: 5px;
        border-left: 3px solid #00ff9d;
    }

    .result-label {
        font-weight: 500;
        color: #cccccc;
    }

    .result-value {
        font-weight: 600;
        color: #00ff9d;
    }

    .result-value.danger {
        color: #ff4757;
    }

    .result-value.profit {
        color: #2ed573;
    }

    .direction.long {
        color: #2ed573;
        font-weight: bold;
    }

    .direction.short {
        color: #ff4757;
        font-weight: bold;
    }

    .warning-message {
        background: rgba(255, 71, 87, 0.2);
        border: 1px solid #ff4757;
        color: #ff4757;
        padding: 12px;
        border-radius: 5px;
        margin-bottom: 15px;
        font-weight: 500;
    }

    .info-message {
        background: rgba(0, 255, 157, 0.2);
        border: 1px solid #00ff9d;
        color: #00ff9d;
        padding: 12px;
        border-radius: 5px;
        margin-bottom: 15px;
        font-weight: 500;
    }

    .trade-summary {
        margin-top: 20px;
        padding: 20px;
        background: rgba(0, 255, 157, 0.1);
        border-radius: 8px;
        border-left: 4px solid #00ff9d;
    }

    .trade-summary h5 {
        color: #00ff9d;
        margin-bottom: 10px;
    }

    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 5px;
        color: #fff;
        font-weight: 500;
        z-index: 9999;
        transform: translateX(400px);
        transition: transform 0.3s ease;
        max-width: 300px;
    }

    .notification.success {
        background: #2ed573;
    }

    .notification.error {
        background: #ff4757;
    }

    .notification.warning {
        background: #ffa502;
    }

    .funded-info {
        background: rgba(0, 255, 157, 0.1);
        border: 1px solid #00ff9d;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: center;
    }

    .funded-info h3 {
        color: #00ff9d;
        margin-bottom: 5px;
    }

    .funded-info p {
        color: #cccccc;
        font-size: 0.9rem;
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="funded-info">
            <h3>Funded Trading Position Size Calculator</h3>
            <p>Professional risk management following funded account calculation standards</p>
        </div>

```
    <div class="calculator-grid">
        <div class="input-group">
            <label for="accountSize">Account Size ($)</label>
            <input type="number" id="accountSize" placeholder="10000" value="10000">
        </div>
        
        <div class="input-group">
            <label for="riskPercent">Risk Per Trade (%)</label>
            <input type="number" id="riskPercent" placeholder="0.5" value="0.5" max="5" step="0.1">
        </div>
        
        <div class="input-group">
            <label for="entryPrice">Entry Price</label>
            <input type="number" id="entryPrice" placeholder="2050.0" step="0.1" value="2050.0">
        </div>
        
        <div class="input-group">
            <label for="stopLoss">Stop Loss Price</label>
            <input type="number" id="stopLoss" placeholder="2040.0" step="0.1" value="2040.0">
        </div>

        <div class="input-group">
            <label for="riskReward">Risk:Reward Ratio</label>
            <select id="riskReward">
                <option value="0.5">1:0.5</option>
                <option value="1" selected>1:1</option>
                <option value="1.5">1:1.5</option>
                <option value="2">1:2</option>
                <option value="2.5">1:2.5</option>
                <option value="3">1:3</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="currencyPair">Currency Pair</label>
            <select id="currencyPair">
                <optgroup label="Major Pairs">
                    <option value="EURUSD">EUR/USD</option>
                    <option value="GBPUSD">GBP/USD</option>
                    <option value="USDJPY">USD/JPY</option>
                    <option value="USDCHF">USD/CHF</option>
                    <option value="AUDUSD">AUD/USD</option>
                    <option value="NZDUSD">NZD/USD</option>
                    <option value="USDCAD">USD/CAD</option>
                </optgroup>
                <optgroup label="Minor Pairs">
                    <option value="EURGBP">EUR/GBP</option>
                    <option value="EURJPY">EUR/JPY</option>
                    <option value="EURCHF">EUR/CHF</option>
                    <option value="GBPJPY">GBP/JPY</option>
                    <option value="GBPCHF">GBP/CHF</option>
                    <option value="AUDJPY">AUD/JPY</option>
                    <option value="AUDCHF">AUD/CHF</option>
                    <option value="NZDJPY">NZD/JPY</option>
                    <option value="NZDCHF">NZD/CHF</option>
                    <option value="CHFJPY">CHF/JPY</option>
                </optgroup>
                <optgroup label="Commodities">
                    <option value="XAUUSD" selected>Gold (XAU/USD)</option>
                    <option value="XAGUSD">Silver (XAG/USD)</option>
                    <option value="USOIL">US Oil</option>
                    <option value="UKOIL">UK Oil</option>
                </optgroup>
                <optgroup label="Indices">
                    <option value="US30">Dow Jones (US30)</option>
                    <option value="US500">S&P 500 (US500)</option>
                    <option value="NAS100">Nasdaq 100</option>
                    <option value="UK100">FTSE 100</option>
                    <option value="GER40">DAX 40</option>
                </optgroup>
                <optgroup label="Cryptocurrencies">
                    <option value="BTCUSD">Bitcoin</option>
                    <option value="ETHUSD">Ethereum</option>
                </optgroup>
            </select>
        </div>
    </div>
    
    <button class="btn" id="calculateBtn">Calculate Position Size</button>
    
    <div id="calculationResult"></div>
</div>

<script>
    class FundedTradingCalculator {
        constructor() {
            // Funded trading account specifications with accurate contract sizes
            this.instrumentConfig = {
                // Major Forex Pairs
                'EURUSD': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'GBPUSD': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'USDJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                'USDCHF': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'AUDUSD': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'NZDUSD': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'USDCAD': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                
                // Minor Pairs
                'EURGBP': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'EURJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                'EURCHF': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'GBPJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                'GBPCHF': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'AUDJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                'AUDCHF': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'NZDJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                'NZDCHF': { 
                    contractSize: 100000, 
                    pipSize: 0.0001, 
                    pipPosition: 4,
                    type: 'forex'
                },
                'CHFJPY': { 
                    contractSize: 100000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'forex'
                },
                
                // Commodities
                'XAUUSD': { 
                    contractSize: 100, 
                    pipSize: 0.1, 
                    pipPosition: 1,
                    type: 'commodity'
                },
                'XAGUSD': { 
                    contractSize: 5000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'commodity'
                },
                'USOIL': { 
                    contractSize: 1000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'commodity'
                },
                'UKOIL': { 
                    contractSize: 1000, 
                    pipSize: 0.01, 
                    pipPosition: 2,
                    type: 'commodity'
                },
                
                // Indices
                'US30': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'index'
                },
                'US500': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'index'
                },
                'NAS100': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'index'
                },
                'UK100': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'index'
                },
                'GER40': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'index'
                },
                
                // Crypto
                'BTCUSD': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'crypto'
                },
                'ETHUSD': { 
                    contractSize: 1, 
                    pipSize: 1, 
                    pipPosition: 0,
                    type: 'crypto'
                }
            };

            // Current exchange rates for accurate cross-pair calculations (simplified)
            this.exchangeRates = {
                'EURUSD': 1.0950,
                'GBPUSD': 1.2750,
                'USDJPY': 148.50,
                'USDCHF': 0.8750,
                'AUDUSD': 0.6750,
                'NZDUSD': 0.6150,
                'USDCAD': 1.3550,
                'EURGBP': 0.8550,
                'CHFJPY': 169.50
            };
        }

        calculate(params) {
            const { accountSize, riskPercent, entryPrice, stopLoss, currencyPair, riskReward } = params;
            
            if (!this.validateInputs(params)) {
                throw new Error('Invalid input parameters');
            }

            const config = this.instrumentConfig[currencyPair];
            if (!config) {
                throw new Error('Unsupported currency pair');
            }

            const riskAmount = (riskPercent / 100) * accountSize;
            const priceDifference = Math.abs(entryPrice - stopLoss);
            
            // Determine trade direction
            const isLong = stopLoss < entryPrice;

            // Calculate pips at risk
            const pipsAtRisk = this.calculatePipsAtRisk(priceDifference, config);
            
            // Calculate pip value in USD using correct methodology
            const pipValue = this.calculatePipValueUSD(currencyPair, entryPrice, config);
            
            if (pipValue <= 0 || isNaN(pipValue)) {
                throw new Error(`Invalid pip value calculation for ${currencyPair}`);
            }

            // Calculate position size: Risk Amount / (Pips at Risk × Pip Value)
            const lotSize = riskAmount / (pipsAtRisk * pipValue);
            
            // Calculate margin required
            const marginRequired = this.calculateMargin(lotSize, entryPrice, config, currencyPair);
            const marginPercent = (marginRequired / accountSize) * 100;
            
            // Calculate take profit
            const profitDistance = priceDifference * parseFloat(riskReward);
            const takeProfitPrice = isLong ? entryPrice + profitDistance : entryPrice - profitDistance;
            const potentialProfit = riskAmount * parseFloat(riskReward);

            return {
                lotSize: Number(lotSize.toFixed(4)),
                riskAmount: Number(riskAmount.toFixed(2)),
                marginRequired: Number(marginRequired.toFixed(2)),
                marginPercent: Number(marginPercent.toFixed(2)),
                potentialProfit: Number(potentialProfit.toFixed(2)),
                takeProfitPrice: Number(takeProfitPrice.toFixed(this.getPricePrecision(currencyPair))),
                pipsAtRisk: Number(pipsAtRisk.toFixed(1)),
                pipValue: Number(pipValue.toFixed(4)),
                isLong,
                direction: isLong ? 'LONG' : 'SHORT',
                currencyPair,
                entryPrice,
                stopLoss,
                leverage: config.leverage,
                accountSize,
                riskReward: parseFloat(riskReward),
                instrumentType: config.type
            };
        }

        calculatePipsAtRisk(priceDifference, config) {
            return priceDifference / config.pipSize;
        }

        calculatePipValueUSD(currencyPair, entryPrice, config) {
            const base = currencyPair.substring(0, 3);
            const quote = currencyPair.substring(3, 6);

            // 1. USD-Quoted Majors (EURUSD, GBPUSD, AUDUSD, etc.)
            if (quote === 'USD') {
                return 10; // Fixed $10 per standard lot for all USD-quoted pairs
            }

            // 2. JPY Pairs (USDJPY, EURJPY, CHFJPY, etc.)
            if (quote === 'JPY') {
                // One pip = 0.01, Standard lot = 100,000
                // Pip value in JPY = 100,000 × 0.01 = 1,000 JPY
                // Convert to USD using USDJPY rate
                const usdJpyRate = this.exchangeRates['USDJPY'] || 148.50;
                const pipValueJPY = config.contractSize * config.pipSize; // 1,000 JPY for standard lot
                return pipValueJPY / usdJpyRate; // ~$6.67 at USDJPY = 150
            }

            // 3. USD Base Pairs (USDCHF, USDCAD, etc.)
            if (base === 'USD') {
                // Pip value in quote currency, need to convert to USD
                const pipValueInQuoteCurrency = config.contractSize * config.pipSize;
                return pipValueInQuoteCurrency / entryPrice;
            }

            // 4. Cross Pairs without USD (EURCHF, EURGBP, AUDCAD, etc.)
            // Pip value is in quote currency, convert to USD
            if (quote === 'CHF') {
                const pipValueCHF = config.contractSize * config.pipSize; // 10 CHF for standard lot
                const usdChfRate = this.exchangeRates['USDCHF'] || 0.8750;
                return pipValueCHF / usdChfRate; // ~$11.43 when USDCHF = 0.8750
            }

            if (quote === 'GBP') {
                const pipValueGBP = config.contractSize * config.pipSize;
                const gbpUsdRate = this.exchangeRates['GBPUSD'] || 1.2750;
                return pipValueGBP * gbpUsdRate;
            }

            if (quote === 'EUR') {
                const pipValueEUR = config.contractSize * config.pipSize;
                const eurUsdRate = this.exchangeRates['EURUSD'] || 1.0950;
                return pipValueEUR * eurUsdRate;
            }

            if (quote === 'AUD') {
                const pipValueAUD = config.contractSize * config.pipSize;
                const audUsdRate = this.exchangeRates['AUDUSD'] || 0.6750;
                return pipValueAUD * audUsdRate;
            }

            if (quote === 'NZD') {
                const pipValueNZD = config.contractSize * config.pipSize;
                const nzdUsdRate = this.exchangeRates['NZDUSD'] || 0.6150;
                return pipValueNZD * nzdUsdRate;
            }

            if (quote === 'CAD') {
                const pipValueCAD = config.contractSize * config.pipSize;
                const usdCadRate = this.exchangeRates['USDCAD'] || 1.3550;
                return pipValueCAD / usdCadRate;
            }

            // 5. Gold (XAUUSD) - $1 move = $100 per lot
            if (currencyPair === 'XAUUSD') {
                return config.contractSize * config.pipSize; // 100 × 0.1 = $10 per $0.10 move
            }

            // 6. Silver (XAGUSD) - $0.01 move = $50 per lot  
            if (currencyPair === 'XAGUSD') {
                return config.contractSize * config.pipSize; // 5000 × 0.01 = $50
            }

            // 7. Oil contracts
            if (currencyPair === 'USOIL' || currencyPair === 'UKOIL') {
                return config.contractSize * config.pipSize; // 1000 × 0.01 = $10 per $0.01 move
            }

            // 8. Indices - broker-defined contract specs
            if (config.type === 'index') {
                return config.contractSize * config.pipSize; // Varies by index
            }

            // 9. Crypto - contract size varies by broker
            if (config.type === 'crypto') {
                return config.contractSize * config.pipSize;
            }

            // Default fallback
            return config.contractSize * config.pipSize;
        }

        calculateMargin(lotSize, entryPrice, config, currencyPair) {
            const notionalValue = lotSize * config.contractSize;
            
            if (config.type === 'forex') {
                // For USD base pairs
                if (currencyPair.startsWith('USD')) {
                    return (notionalValue * entryPrice) / config.leverage;
                } else {
                    // For other forex pairs, convert to USD
                    return (notionalValue * entryPrice) / config.leverage;
                }
            } else {
                // For commodities, indices, crypto
                return (notionalValue * entryPrice) / config.leverage;
            }
        }

        validateInputs({ accountSize, riskPercent, entryPrice, stopLoss, currencyPair, riskReward }) {
            return accountSize > 0 && 
                   riskPercent > 0 && 
                   riskPercent <= 10 &&
                   entryPrice > 0 && 
                   stopLoss > 0 && 
                   entryPrice !== stopLoss &&
                   currencyPair && 
                   typeof currencyPair === 'string' &&
                   riskReward > 0;
        }

        getPricePrecision(currencyPair) {
            const config = this.instrumentConfig[currencyPair];
            if (!config) return 5;
            
            if (config.pipPosition === 2) return 2;  // JPY pairs
            if (config.pipPosition === 4) return 5;  // Most forex
            if (config.pipPosition === 1) return 1;  // Gold
            return 0; // Indices, crypto
        }

        getInstrumentInfo(currencyPair) {
            return this.instrumentConfig[currencyPair] || null;
        }
    }

    // Initialize calculator
    const calculator = new FundedTradingCalculator();

    // Event handlers
    document.getElementById('calculateBtn').addEventListener('click', calculatePosition);

    function calculatePosition() {
        try {
            const params = getFormData();
            
            if (!params) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }

            console.log('Calculating with params:', params);
            const result = calculator.calculate(params);
            console.log('Calculation result:', result);
            displayResult(result);

        } catch (error) {
            console.error('Calculation error:', error);
            showNotification(`Calculation error: ${error.message}`, 'error');
            
            // Show debug info in console
            const params = getFormData();
            console.log('Debug - Input params:', params);
            if (params) {
                const config = calculator.getInstrumentInfo(params.currencyPair);
                console.log('Debug - Instrument config:', config);
            }
        }
    }

    function getFormData() {
        const accountSize = parseFloat(document.getElementById('accountSize').value);
        const riskPercent = parseFloat(document.getElementById('riskPercent').value);
        const entryPrice = parseFloat(document.getElementById('entryPrice').value);
        const stopLoss = parseFloat(document.getElementById('stopLoss').value);
        const currencyPair = document.getElementById('currencyPair').value;
        const riskReward = document.getElementById('riskReward').value;

        if (!accountSize || !riskPercent || !entryPrice || !stopLoss || !currencyPair || !riskReward) {
            return null;
        }

        if (accountSize <= 0 || riskPercent <= 0 || entryPrice <= 0 || stopLoss <= 0) {
            return null;
        }

        if (entryPrice === stopLoss) {
            throw new Error('Entry price and stop loss cannot be the same');
        }

        return {
            accountSize,
            riskPercent,
            entryPrice,
            stopLoss,
            currencyPair,
            riskReward
        };
    }

    function displayResult(result) {
        const resultContainer = document.getElementById('calculationResult');

        // Risk warnings
        const riskWarning = result.riskPercent > 2 ? 
            '<div class="warning-message">⚠️ Funded accounts recommend maximum 1-2% risk per trade!</div>' : '';

        resultContainer.innerHTML = `
            <div class="calculation-result">
                <h4>Funded Trading Position Calculation</h4>
                ${riskWarning}
                
                <div class="result-grid">
                    <div class="result-item">
                        <span class="result-label">Direction:</span>
                        <span class="result-value direction ${result.direction.toLowerCase()}">${result.direction}</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Position Size:</span>
                        <span class="result-value">${result.lotSize} lots</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Risk Amount:</span>
                        <span class="result-value">$${result.riskAmount}</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Pips at Risk:</span>
                        <span class="result-value">${result.pipsAtRisk} pips</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Pip Value:</span>
                        <span class="result-value">$${result.pipValue}</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Risk:Reward:</span>
                        <span class="result-value">1:${result.riskReward}</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Potential Profit:</span>
                        <span class="result-value profit">$${result.potentialProfit}</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Take Profit:</span>
                        <span class="result-value">${result.takeProfitPrice}</span>
                    </div>
                </div>
                
                <div class="trade-summary">
                    <h5>Funded Trading Setup</h5>
                    <p><strong>Entry:</strong> ${result.entryPrice}</p>
                    <p><strong>Stop Loss:</strong> ${result.stopLoss} (-${result.pipsAtRisk} pips)</p>
                    <p><strong>Take Profit:</strong> ${result.takeProfitPrice} (+${(result.pipsAtRisk * result.riskReward).toFixed(1)} pips)</p>
                    <p><strong>Risk:Reward:</strong> 1:${result.riskReward} | <strong>Instrument:</strong> ${result.currencyPair} (${result.instrumentType})</p>
                </div>
            </div>
        `;

        showNotification('Position calculated successfully using funded trading standards!', 'success');
    }

    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 10);

        setTimeout(() => {
            notification.style.transform = 'translateX(400px)';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 4000);
    }

    // Input validation with funded trading standards
    document.getElementById('riskPercent').addEventListener('input', function(e) {
        const value = parseFloat(e.target.value);
        if (value > 2) {
            e.target.style.borderColor = '#ff4757';
            showNotification('Funded accounts recommend max 2% risk per trade!', 'warning');
        } else if (value > 5) {
            e.target.style.borderColor = '#ff4757';
            showNotification('Excessive risk! Funded accounts have strict risk limits.', 'error');
        } else {
            e.target.style.borderColor = '';
        }
    });

    // Auto-update example prices based on currency pair with accurate values
    document.getElementById('currencyPair').addEventListener('change', function(e) {
        const pair = e.target.value;
        const entryInput = document.getElementById('entryPrice');
        const stopInput = document.getElementById('stopLoss');
        
        // Set realistic prices for each pair
        switch(pair) {
            case 'EURUSD':
                entryInput.value = '1.09500';
                stopInput.value = '1.09000';
                break;
            case 'GBPUSD':
                entryInput.value = '1.27500';
                stopInput.value = '1.27000';
                break;
            case 'USDJPY':
                entryInput.value = '148.50';
                stopInput.value = '148.00';
                break;
            case 'USDCHF':
                entryInput.value = '0.87500';
                stopInput.value = '0.87000';
                break;
            case 'AUDUSD':
                entryInput.value = '0.67500';
                stopInput.value = '0.67000';
                break;
            case 'NZDUSD':
                entryInput.value = '0.61500';
                stopInput.value = '0.61000';
                break;
            case 'USDCAD':
                entryInput.value = '1.35500';
                stopInput.value = '1.36000';
                break;
            case 'EURGBP':
                entryInput.value = '0.85500';
                stopInput.value = '0.85000';
                break;
            case 'EURJPY':
                entryInput.value = '162.50';
                stopInput.value = '162.00';
                break;
            case 'GBPJPY':
                entryInput.value = '189.50';
                stopInput.value = '189.00';
                break;
            case 'CHFJPY':
                entryInput.value = '184';
                stopInput.value = '184.5';
                break;
            case 'XAUUSD':
                entryInput.value = '2050.0';
                stopInput.value = '2040.0';
                break;
            case 'XAGUSD':
                entryInput.value = '24.50';
                stopInput.value = '24.00';
                break;
            case 'USOIL':
                entryInput.value = '75.50';
                stopInput.value = '74.50';
                break;
            case 'US30':
                entryInput.value = '35000';
                stopInput.value = '34900';
                break;
            case 'US500':
                entryInput.value = '4500';
                stopInput.value = '4480';
                break;
            case 'NAS100':
                entryInput.value = '15500';
                stopInput.value = '15450';
                break;
            case 'BTCUSD':
                entryInput.value = '43000';
                stopInput.value = '42500';
                break;
            case 'ETHUSD':
                entryInput.value = '2500';
                stopInput.value = '2450';
                break;
        }
    });

    // Initialize with default XAU/USD values
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Funded Trading Position Calculator loaded');
        // Auto-calculate on page load for demo
        setTimeout(() => {
            if (document.getElementById('entryPrice').value && 
                document.getElementById('stopLoss').value) {
                calculatePosition();
            }
        }, 500);
    });
</script>
```

</body>
</html>